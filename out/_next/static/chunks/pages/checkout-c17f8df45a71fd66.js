(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{7250:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return i(7981)}])},3552:function(e,t,i){"use strict";i.d(t,{w:function(){return s},t:function(){return r}});var n=JSON.parse('[{"id":1,"slug":"nws-128-org","title":"Nature\'s Way Soil Organic Liquid Fertilizer — 1 Gallon","description":"Microbial-rich balanced fertilizer for gardens and lawns.","price":20.99,"active":true,"sku":"NWS-128-ORG"},{"id":2,"slug":"nws-128-tom","title":"Organic Tomato Liquid Fertilizer — 1 Gallon","description":"Tomato-focused nutrients with beneficial microbes.","price":24.99,"active":true,"sku":"NWS-128-TOM"},{"id":3,"slug":"nws-128-kelp","title":"Liquid Kelp Fertilizer — 1 Gallon","description":"Seaweed extract for root vigor and stress tolerance.","price":29.99,"active":true,"sku":"NWS-128-KELP"},{"id":4,"slug":"nws-cf2-prem","title":"Premium Soil Blend — 2 Cubic Feet","description":"Biochar-enriched organic soil mix with mycorrhizae.","price":39.99,"active":true,"sku":"NWS-CF2-PREM"},{"id":5,"slug":"nws-128-worm","title":"Worm Casting Fertilizer — 1 Gallon","description":"Pure worm castings liquid for organic growing.","price":22.99,"active":true,"sku":"NWS-128-WORM"},{"id":6,"slug":"nws-32-root","title":"Root Booster Organic — 32 oz","description":"Concentrated root development formula.","price":18.99,"active":true,"sku":"NWS-32-ROOT"},{"id":7,"slug":"nws-kit-strt","title":"Garden Starter Kit — Complete Set","description":"Everything you need to start an organic garden.","price":49.99,"active":false,"sku":"NWS-KIT-STRT"},{"id":8,"slug":"nws-128-tea","title":"Compost Tea Blend — 1 Gallon","description":"Living soil amendment with beneficial bacteria.","price":26.99,"active":true,"sku":"NWS-128-TEA"},{"id":9,"slug":"nws-256-lawn","title":"Organic Lawn Food — 2 Gallon","description":"Slow-release nutrients for healthy grass.","price":34.99,"active":true,"sku":"NWS-256-LAWN"},{"id":10,"slug":"nws-16-ph","title":"Soil pH Balancer — 16 oz","description":"Natural pH adjustment for optimal plant growth.","price":15.99,"active":true,"sku":"NWS-16-PH"}]');function r(){return n.filter(e=>e.active)}function s(e){return n.find(t=>t.slug===e&&t.active)}},7981:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i(5893),r=i(7294),s=i(6664),a=i(4465);function o(){let e=(0,s.useStripe)(),t=(0,s.useElements)(),[i,a]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1),l=async i=>{if(i.preventDefault(),!e||!t)return;c(!0);let{error:n}=await e.confirmPayment({elements:t,confirmParams:{return_url:window.location.origin+"/checkout?status=success"}});n&&a(n.message||"An unexpected error occurred."),c(!1)};return(0,n.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,n.jsx)(s.PaymentElement,{}),(0,n.jsx)("button",{type:"submit",disabled:!e||o,className:"px-4 py-2 bg-green-600 text-white rounded disabled:opacity-50",children:o?"Processing…":"Pay now"}),i&&(0,n.jsx)("div",{className:"text-red-500",children:i})]})}var c=i(3552),l=i(3454);let u=(0,a.J)(l.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"");function d(){let[e,t]=(0,r.useState)(""),[i,a]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),i=e.get("slug")||"",n=e.get("qty")||"1";a((0,c.w)(i)||null),i&&fetch("/api/stripe/create-intent?slug=".concat(i,"&qty=").concat(n)).then(e=>e.json()).then(e=>t(e.clientSecret))},[]),i)?(0,n.jsxs)("div",{className:"p-8 max-w-md mx-auto",children:[(0,n.jsxs)("h1",{className:"text-xl font-semibold mb-4",children:["Checkout — ",i.title]}),e&&(0,n.jsx)(s.Elements,{stripe:u,options:{clientSecret:e},children:(0,n.jsx)(o,{})})]}):(0,n.jsx)("p",{className:"p-4",children:"Product not found."})}}},function(e){e.O(0,[564,888,774,179],function(){return e(e.s=7250)}),_N_E=e.O()}]);